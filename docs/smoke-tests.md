
# قائمة فحص الاختبارات النهائية (Smoke Test Checklist) - نتائج Production Dry-Run

تم إجراء هذه الاختبارات بنجاح على بيئة الإنتاج (Beta V1) بتاريخ 20 مايو 2025.

### أولاً: التحقق من الهوية (Auth)
1. [x] تسجيل الدخول بحساب صحيح ينقل المستخدم للوحة التحكم. (تم التحقق)
2. [x] تسجيل الدخول بحساب خاطئ يظهر تنبيه "البريد أو كلمة المرور غير صحيحة". (تم التحقق)
3. [x] تسجيل الخروج يمسح الجلسة ويوجه لصفحة الدخول. (تم التحقق)

### ثانياً: حركات الكاش (Movements)
4. [x] إنشاء سند قبض (IN) وحفظه "كمسودة" يظهر في الجدول كمسودة. (تم التحقق)
5. [x] إنشاء سند صرف (OUT) و"إرساله للاعتماد" يظهر بحالة "بانتظار المراجعة". (تم التحقق)
6. [x] محاولة إضافة حركة بتاريخ فترة محاسبية مقفولة يظهر تنبيه "الفترة مقفولة". (تم التحقق)
7. [x] رفع مرفق (صورة/PDF) للسند المالي يظهر في قائمة المرفقات. (تم التحقق)
8. [x] مشاهدة المرفق تفتح رابطاً مؤقتاً صالحاً للمعاينة. (تم التحقق)

### ثالثاً: الاعتمادات (Approvals)
9. [x] المحاسب (ACCOUNTANT) يرى الحركات المرسلة في صفحة الاعتمادات. (تم التحقق)
10. [x] الضغط على "اعتماد" يغير حالة السند لـ "معتمد" ويحدث رصيد الخزينة. (تم التحقق)
11. [x] الضغط على "رفض" مع كتابة سبب يظهر للموظف سبب الرفض في تفاصيل السند. (تم التحقق)
12. [x] الموظف (EMPLOYEE) لا يرى أزرار الاعتماد حتى لو دخل لصفحة التفاصيل. (تم التحقق)

### رابعاً: الإقفال والعهد (Daily Close & Custody)
13. [x] صفحة الإقفال تحسب الرصيد المتوقع بناءً على حركات اليوم بدقة. (تم التحقق)
14. [x] إكمال الإقفال اليومي يمنع إضافة أي حركات جديدة في ذلك التاريخ. (تم التحقق)
15. [x] إنشاء عهدة لموظف جديد تظهر في صفحة العهد برصيد صفر. (تم التحقق)
16. [x] "تغذية عهدة" تزيد الرصيد المتاح، و"صرف" تنقصه. (تم التحقق)
17. [x] محاولة صرف مبلغ أكبر من رصيد العهدة يظهر تنبيه "الرصيد غير كافٍ". (تم التحقق)

### خامساً: الإعدادات والتقارير (Settings & Reports)
18. [x] المالك (OWNER) يستطيع تعطيل فرع، والتغيير يظهر فوراً في نماذج الإضافة. (تم التحقق)
19. [x] الرسوم البيانية في التقارير تتحدث عند تغيير نطاق التاريخ. (تم التحقق)
20. [x] العزلة الأمنية: المستخدم لا يرى أي بيانات تخص شركة أخرى. (تم التحقق عبر اختبار RLS يدوي)
