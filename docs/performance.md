
# تحليل الأداء (Performance Sanity)

لضمان سرعة النظام مع تزايد عدد الحركات المالية، تم تطبيق الفهارس التالية:

### 1. الفهارس المركبة (Composite Indexes)
تم التركيز على الفهارس التي تدمج `company_id` مع حقول الفلترة الأكثر استخداماً:
- `idx_movements_company_date`: لسرعة عرض جدول الحركات والتقارير الشهرية.
- `idx_daily_close_lookup`: لسرعة التحقق من وجود إقفال قبل إضافة حركات جديدة.

### 2. فهارس المفاتيح الخارجية (FK Indexes)
تمت إضافة فهارس لجميع حقول الربط لتسريع عمليات الـ `JOIN`:
- `audit_logs(entity_id)`: لسرعة عرض سجل التدقيق في صفحة التفاصيل.
- `movement_attachments(movement_id)`: لسرعة جلب المرفقات.

### 3. توصيات مستقبلية
- تفعيل `Table Partitioning` لجدول `audit_logs` إذا تجاوز عدد السجلات 10 مليون سجل.
- استخدام `Materialized Views` لتقارير الأداء السنوية المعقدة.
